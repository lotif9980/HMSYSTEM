@model HMSYSTEM.Models.Patient

@{
    ViewData["Title"] = "Patient Details";
}

<div class="container mt-5">
    <div class="card shadow p-4 bg-light" style="max-width: 900px; margin: auto;">
        <div class="card-header">
            <div class="btn-group">
                <a class="btn btn-success" asp-controller="Patient" asp-action="Save">
                    <i class="fa fa-plus"></i> Add Patient
                </a>
                <a class="btn btn-primary" asp-controller="Patient" asp-action="Index">
                    <i class="fa fa-list"></i> Patient List
                </a>
                @* <button type="button" onclick="printContent(@Model.PatientID)" class="btn btn-danger"><i class="fa fa-print"></i></button> *@
                <button class="btn btn-danger" onclick="loadAndPrint(@Model.PatientID)">
                    <i class="fa fa-print"></i> Print
                </button>
            
            </div>
        </div>

        <div class="row">
            <!-- Patient Image -->
            <div class="col-md-4 d-flex align-items-center justify-content-center">
                <img src="~/Patients/@Model.Picture" class="img-thumbnail rounded" alt="Patient Image" style="max-height: 250px;" />
            </div>

            <!-- Patient Info -->
            <div class="col-md-8">
                @{
                    var labelStyle = "width: 160px; font-weight: bold;";
                }

                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Name:</div>
                    <div>@Model.FirstName @Model.LastName</div>
                </div>
                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Email:</div>
                    <div>@Model.Email</div>
                </div>
                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Password:</div>
                    <div>@Model.Password</div>
                </div>
                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Phone:</div>
                    <div>@Model.Phone</div>
                </div>
                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Blood Group:</div>
                    <div>@Model.BloodGroup</div>
                </div>
                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Sex:</div>
                    <div>@Model.Sex</div>
                </div>
                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Date of Birth:</div>
                    <div>@Model.DateOfBirth?.ToString("dd MMM yyyy")</div>
                </div>
                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Address:</div>
                    <div>@Model.Address</div>
                </div>
                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Status:</div>
                    <div>@(Model.Status == true ? "Active" : "Inactive")</div>
                </div>
                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Emer. Contact:</div>
                    <div>@Model.EmergencyContact</div>
                </div>

                <div class="mb-2 d-flex">
                    <div style="@labelStyle">Emer. Contact:</div>
                    <div>@Model.EmergencyContact</div>
                </div>

                <div class="text-end mt-3">
                    <a asp-action="Index" class="btn btn-secondary">Back</a>
                </div>
            </div>

        </div>
    </div>
</div>

<div id="printContainer" style="display:none;"></div>







<script>
        function loadAndPrint(id) {
            $.ajax({
                url: '/Patient/PrintGetPatient/' + id,
                type: 'GET',
                success: function (data) {
                    $('#printContainer').html(data);
                    var printContents = document.getElementById('printContainer').innerHTML;
                    var originalContents = document.body.innerHTML;

                    document.body.innerHTML = printContents;
                    window.print();
                    document.body.innerHTML = originalContents;
                    location.reload();
                },
                error: function () {
                    alert("Failed to load print view.");
                }
            });
        }
</script>
